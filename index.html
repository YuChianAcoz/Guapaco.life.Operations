<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>李李摳摳｜營運紀錄後台（MVP）</title>
  <link rel="stylesheet" href="style.css" />
  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo">🍮</div>
      <div>
        <div class="title">李李摳摳｜營運紀錄後台</div>
        <div class="subtitle">收入 / 成本 / 市集 / 網路｜自動統計＋成長曲線</div>
      </div>
    </div>

    <div class="actions">
      <button id="btnExport" class="btn">匯出資料 JSON</button>
      <label class="btn ghost" for="fileImport">匯入 JSON</label>
      <input id="fileImport" type="file" accept="application/json" hidden />
      <button id="btnReset" class="btn danger">清空資料</button>
    </div>
  </header>

  <main class="container">
    <!-- Controls -->
    <section class="card">
      <div class="row wrap gap">
        <div class="field">
          <label>選擇月份</label>
          <input id="monthPicker" type="month" />
        </div>

        <div class="field">
          <label>本月營業額目標（元）</label>
          <input id="goalInput" type="number" min="0" step="100" placeholder="30000" />
        </div>

        <div class="field">
          <label>&nbsp;</label>
          <button id="btnSaveGoal" class="btn primary">儲存目標</button>
        </div>
      </div>
    </section>

    <!-- KPIs -->
    <section class="kpis">
      <div class="kpi">
        <div class="kpi-label">本月收入</div>
        <div id="kpiIncome" class="kpi-value">0</div>
        <div class="kpi-sub">市集 + 網路 + 其他</div>
      </div>
      <div class="kpi">
        <div class="kpi-label">本月成本</div>
        <div id="kpiCost" class="kpi-value">0</div>
        <div class="kpi-sub">材料 / 包裝 / 攤位費 / 運費 / 其他</div>
      </div>
      <div class="kpi">
        <div class="kpi-label">本月淨利</div>
        <div id="kpiProfit" class="kpi-value">0</div>
        <div class="kpi-sub">收入 - 成本</div>
      </div>
      <div class="kpi">
        <div class="kpi-label">目標達成</div>
        <div id="kpiProgress" class="kpi-value">0%</div>
        <div class="kpi-sub"><span id="kpiGoalText">目標：0</span></div>
      </div>
    </section>

    <!-- Charts -->
    <section class="grid2">
      <section class="card">
        <div class="card-title">近 6 個月收入/成本/淨利（折線）</div>
        <canvas id="lineChart" height="120"></canvas>
      </section>

      <section class="card">
        <div class="card-title">本月收入來源（市集/網路/其他）</div>
        <canvas id="pieChart" height="120"></canvas>
      </section>
    </section>

    <!-- Forms -->
    <section class="grid2">
      <section class="card">
        <div class="card-title">新增收入</div>
        <form id="incomeForm" class="form">
          <div class="row gap">
            <div class="field">
              <label>日期</label>
              <input name="date" type="date" required />
            </div>
            <div class="field">
              <label>金額（元）</label>
              <input name="amount" type="number" min="0" step="1" required />
            </div>
          </div>

          <div class="row gap">
            <div class="field">
              <label>類型</label>
              <select name="type">
                <option value="market">市集</option>
                <option value="online">網路</option>
                <option value="other">其他</option>
              </select>
            </div>
            <div class="field">
              <label>備註</label>
              <input name="note" type="text" placeholder="例如：板橋市集 / IG禮盒" />
            </div>
          </div>

          <div class="row end">
            <button class="btn primary" type="submit">新增收入</button>
          </div>
        </form>
      </section>

      <section class="card">
        <div class="card-title">新增成本</div>
        <form id="costForm" class="form">
          <div class="row gap">
            <div class="field">
              <label>日期</label>
              <input name="date" type="date" required />
            </div>
            <div class="field">
              <label>金額（元）</label>
              <input name="amount" type="number" min="0" step="1" required />
            </div>
          </div>

          <div class="row gap">
            <div class="field">
              <label>類型</label>
              <select name="type">
                <option value="material">材料</option>
                <option value="packaging">包裝</option>
                <option value="booth">攤位費</option>
                <option value="shipping">運費</option>
                <option value="other">其他</option>
              </select>
            </div>
            <div class="field">
              <label>備註</label>
              <input name="note" type="text" placeholder="例如：奶油/麵粉/盒子/租位" />
            </div>
          </div>

          <div class="row end">
            <button class="btn primary" type="submit">新增成本</button>
          </div>
        </form>
      </section>
    </section>

    <!-- Tables -->
    <section class="grid2">
      <section class="card">
        <div class="card-title">本月收入紀錄</div>
        <div class="table-wrap">
          <table class="table" id="incomeTable">
            <thead>
              <tr>
                <th>日期</th>
                <th>類型</th>
                <th class="right">金額</th>
                <th>備註</th>
                <th></th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </section>

      <section class="card">
        <div class="card-title">本月成本紀錄</div>
        <div class="table-wrap">
          <table class="table" id="costTable">
            <thead>
              <tr>
                <th>日期</th>
                <th>類型</th>
                <th class="right">金額</th>
                <th>備註</th>
                <th></th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </section>
    </section>

    <footer class="footer">
      <div>資料儲存在你的瀏覽器（localStorage）。建議每週匯出 JSON 備份一次。</div>
    </footer>
  </main>

  <script src="app.js"></script>
</body>
</html>